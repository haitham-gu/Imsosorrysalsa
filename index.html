<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An Honest Apology</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Ambient shapes for mood -->
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="glow glow-3"></div>

    <!-- Progress indicator (optional) -->
    <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
    </div>

    <!-- Music toggle (OFF by default) -->
    <button class="music-toggle" id="musicToggle" aria-label="Toggle background music">
        <span class="music-icon">ðŸ”‡</span>
    </button>
    <audio id="backgroundMusic" loop>
        <!-- Add your audio source here if desired -->
        <!-- <source src="path/to/music.mp3" type="audio/mpeg"> -->
    </audio>

    <!-- Container for all screens -->
    <div class="container">
        
        <!-- Screen 1: Intro / Consent -->
        <section class="screen active" id="screen1">
            <div class="content">
                <h1>If you choose to read this</h1>
                <p>This is not a bridge back to us. It is me standing still, naming harm I caused.</p>
                <p>No persuasion. No pressure. Just accountability that arrived late.</p>
                <p>Your choice outweighs my need to be heard. If you leave, I respect that completely.</p>
                <p class="tagline">You owe me nothing. Not time, not attention, not a response.</p>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(2)">Continue</button>
                    <button class="btn btn-secondary" onclick="leaveWebsite()">Leave</button>
                </div>
            </div>
        </section>

        <!-- Screen 2: Birthday Site Reminder -->
        <section class="screen" id="screen2">
            <div class="content">
                <h1>Do you remember that birthday site?</h1>
                <p>I made it for you back then. If you want to see it again, it's still here.</p>
                <div class="button-group">
                    <a class="btn btn-secondary" href="https://haitham-gu.github.io/Happy-birthday-salsabil/" target="_blank" rel="noopener">Open the birthday site</a>
                    <button class="btn btn-primary" onclick="goToScreen(3)">Continue</button>
                    <button class="btn btn-secondary" onclick="leaveWebsite()">Leave</button>
                </div>
            </div>
        </section>

        <!-- Screen 3: First Message Memory -->
        <section class="screen" id="screen3">
            <div class="content">
                <h1>The first sentence I ever sent you</h1>
                <p class="first-message">
                    "Is that a <span class="blurred-word" id="blurredWord">â–ˆâ–ˆâ–ˆâ–ˆ</span> or something?"
                </p>
                <p class="subtitle">You don't need to recall it. I have to carry it because it started everything.</p>
                <div class="input-group">
                    <input 
                        type="text" 
                        id="wordInput" 
                        placeholder="one word (optional)"
                        maxlength="20"
                    >
                    <button class="btn btn-secondary" onclick="revealWord()">Reveal the word</button>
                </div>
                <p class="revealed-message hidden" id="revealedMessage">
                    It wasn't special. But it was ours.
                </p>

                <div class="memory-section">
                    <h2>Fragments I still carry</h2>
                    <p class="subtitle">These are mine to hold, not yours to relive.</p>
                    <div class="memory-grid">
                        <div class="memory-card" tabindex="0" onclick="toggleMemoryCard(this)" onkeydown="toggleMemoryCardKey(event, this)">
                            <div class="memory-front">Garden bench</div>
                            <div class="memory-back">Our first date in that garden in el khroub, awkward hands. You leaned closer and we found our first kiss. You were gentle with my hesitation. I should have kept that gentleness alive.</div>
                        </div>
                        <div class="memory-card" tabindex="0" onclick="toggleMemoryCard(this)" onkeydown="toggleMemoryCardKey(event, this)">
                            <div class="memory-front">First photo</div>
                            <div class="memory-back">The mirror selfie in that restaurant at the 2nd floor (special flavored pizza)
Bad lighting, holding you in my arm like my life depends on you 
It was Imperfect, unfiltered, OURS.
I miss going to lbled m3ek btw</div>
                        </div>
                        <div class="memory-card" tabindex="0" onclick="toggleMemoryCard(this)" onkeydown="toggleMemoryCardKey(event, this)">
                            <div class="memory-front">First fight</div>
                            <div class="memory-back">It was in Instagram DMs. I kept sending, faster and harsher. You went quiet. I treated winning like it mattered more than you feeling safe. That moment needed me to pause and listen.</div>
                        </div>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(4)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 4: Confession (after first word) -->
        <section class="screen" id="screen4">
            <div class="content">
                <h1>What I did</h1>
                <p>I blocked you everywhere without a word. I vanished instead of facing discomfort.</p>
                <p>When I returned, I used labels where accountability should have been.</p>
                <p class="emphasis">That was harm, not honesty. Silence, then attack, is not communication.</p>
                <p>No justification. No emotional defense. Just owning the damage I caused.</p>
                <div class="button-group">
                    <button class="btn btn-primary disabled" id="confessionBtn" onclick="goToScreen(5)">Continue</button>
                </div>
                <p class="hint" id="confessionHint">Take a moment with this.</p>
            </div>
        </section>

        <!-- Screen 5: The Words -->
        <section class="screen" id="screen5">
            <div class="content">
                <h1>The words I used</h1>
                <p>These were not reflections of you. They were weapons I chose.</p>
                <div class="words-grid">
                    <div class="word-card" onclick="revealWordCard(this, 'toxic')">
                        <span class="word-front blurred">toxic</span>
                        <span class="word-back hidden">This wasn't communication. It was a weapon.</span>
                    </div>
                    <div class="word-card" onclick="revealWordCard(this, 'manipulator')">
                        <span class="word-front blurred">manipulator</span>
                        <span class="word-back hidden">I attacked your character instead of expressing my feelings.</span>
                    </div>
                    <div class="word-card" onclick="revealWordCard(this, 'liar')">
                        <span class="word-front blurred">liar</span>
                        <span class="word-back hidden">I chose cruelty over honesty.</span>
                    </div>
                    <div class="word-card" onclick="revealWordCard(this, 'control freak')">
                        <span class="word-front blurred">control freak</span>
                        <span class="word-back hidden">I blamed you for what I couldn't communicate.</span>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(6)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 6: Accountability -->
        <section class="screen" id="screen6">
            <div class="content">
                <h1>Why it was wrong</h1>
                <p>Blocking without closure forced you into doubt you never asked for.</p>
                <p>Silence stole your right to context. My return with insults layered injury on confusion.</p>
                <p class="emphasis">You deserved clarity, safety, and care. You got none of that from me.</p>
                <p>This is not about intentionâ€”it is about impact. I harmed you. That is mine to own.</p>
                <p>I'm holding that harm. I am not placing it back on you.</p>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(7)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 7: Reflection Quiz -->
        <section class="screen" id="screen7">
            <div class="content">
                <h1>What should I have done instead?</h1>
                <div class="quiz-options">
                    <button class="quiz-option" onclick="selectAnswer(this, 'correct')">
                        Communicate boundaries clearly
                    </button>
                    <button class="quiz-option" onclick="selectAnswer(this, 'correct')">
                        Ask for space respectfully
                    </button>
                    <button class="quiz-option" onclick="selectAnswer(this, 'correct')">
                        Explain my limits honestly
                    </button>
                    <button class="quiz-option" onclick="selectAnswer(this, 'wrong')">
                        Attack your character
                    </button>
                </div>
                <div class="quiz-feedback hidden" id="quizFeedback"></div>
                <div class="button-group">
                    <button class="btn btn-primary hidden" id="quizContinue" onclick="goToScreen(8)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 8: Her Perspective -->
        <section class="screen" id="screen8">
            <div class="content">
                <h1>How it might have felt</h1>
                <div class="perspective-text">
                    <p><em>One day the line went dead. No reason. No goodbye. Just absence.</em></p>
                    <p><em>Silence turned into doubt; doubt slid into self-blame.</em></p>
                    <p><em>Then I returned with accusations instead of answers.</em></p>
                    <p><em>Those words treated you like a problem to solve, not a person to respect.</em></p>
                    <p><em>It was unsafe, unfair, undeservedâ€”and I caused that.</em></p>
                </div>
                <p class="emphasis">You deserved better than that.</p>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(9)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 9: Growth -->
        <section class="screen" id="screen9">
            <div class="content">
                <h1>What I'm learning</h1>
                <p>Silence to dodge discomfort is neglect, not care.</p>
                <p>Anger turned into cruelty is not strengthâ€”it is harm.</p>
                <p>Regulation means pausing, breathing, and choosing language that does not cut.</p>
                <p>This is not about earning anything from you. It's about never repeating this pattern with anyone.</p>
                <p class="emphasis">If our paths cross, proof lives in conduct, not in words or promises.</p>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToScreen(10)">Continue</button>
                </div>
            </div>
        </section>

        <!-- Screen 10: You were my music -->
        <section class="screen" id="screen10">
            <div class="content">
                <h1>You were my music</h1>
                <p>You were the kindest person in my life,</p>
                <p>and I treated you in ways you didnâ€™t deserve.</p>
                <p>I didnâ€™t want us to end,</p>
                <p>but I see how my actions led here.</p>
                <p>You were my music.</p>
                <p>And now every song reminds me of you.</p>
                <div class="button-group">
                    <button class="btn btn-secondary" id="musicPlayBtn" onclick="toggleMemorySong()">Play the song</button>
                    <button class="btn btn-primary" onclick="goToScreen(11)">Continue</button>
                </div>
                <audio id="memorySong">
                    <source src="rf.mp3" type="audio/mpeg">
                </audio>
            </div>
        </section>

        <!-- Screen 11: Ending -->
        <section class="screen" id="screen11">
            <div class="content">
                <h1>You owe me nothing</h1>
                <p>Not forgiveness.</p>
                <p>Not understanding.</p>
                <p>Not a reply.</p>
                <p>This is about accountability, not comfort for me.</p>
                <p>Thank you for reading, if you chose to. If not, that's respected too.</p>
                <p class="emphasis">You decide what comes next. I accept whatever that is.</p>
                <div class="button-group">
                    <a class="btn btn-secondary" href="https://t.me/haithamgu" target="_blank" rel="noopener">Send a word on Telegram</a>
                    <button class="btn btn-primary" onclick="closeWebsite()">Leave / Close</button>
                </div>
            </div>
        </section>

    </div>

    <script src="script.js"></script>
</body>
</html>
